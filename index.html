<!DOCTYPE html>
<html>
  <head>
    <style>
       /* Set the size of the div element that contains the map */
      #map {
        height: 600px;  /* The height is 400 pixels */
        width: 100%;  /* The width is the width of the web page */
       }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="map"></div>
    <script>
    //  https://turtlemt.github.io/divemap/
    // Initialize and add the map
    function initMap() {
      // The location of Uluru
      var myCenter = {lat: 24.434666, lng: 120.6295867};
      // The map, centered at Uluru
      var map = new google.maps.Map(
          document.getElementById('map'), {zoom: 6, center: myCenter, gestureHandling: 'greedy'});
      
      var markers = myDiveSites.map(function(myDiveSite, i) {
        var image = './dive_flag.png';
        return new google.maps.Marker({
          position: {lat: myDiveSite.lat, lng:myDiveSite.lng},
          title: myDiveSite.title,
          icon: image,
          map: map
        });
      });
      
      markers.map(function(marker, i) {
        if ("undefine" != typeof myDiveSites[i].infoContent) {
          infowindow = new google.maps.InfoWindow();
          marker.addListener('click', function() {
            infowindow.setContent(myDiveSites[i].infoContent);
            infowindow.open(map, marker);
          });
        }
      });
    }
    
    </script>
    <!--Load the API from the specified URL
    * The async attribute allows the browser to render the page while the API loads
    * The key parameter will contain your own API key (which is not needed for this tutorial)
    * The callback parameter executes the initMap() function
    -->
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqKRxHSgn2NazkSjVqz_cbI6TpHkhWtJA&callback=initMap">
    </script>
  </body>
</html>

<script>
  var myDiveSites = [
    {title:'Bitou', lat: 25.125, lng: 121.91},
    {title:'Tulamben', lat: -8.29176, lng: 115.6064023, infoContent: '<a href=" http://blog.macrooceans.com/?p=156" target="_blank">Blog Post</a>'},
    {title:'Ambon', lat: -3.699571, lng: 128.1116453, infoContent: '<a href=" http://blog.macrooceans.com/?p=472" target="_blank">Blog Post</a>'},
    {title:'Banda', lat: -4.523013, lng: 129.8961808, infoContent: '<a href=" http://blog.macrooceans.com/?p=564" target="_blank">Blog Post</a>'},
    {title:'Lembeh', lat: 1.4382737, lng: 125.2141881},
    {title:'Anilao', lat: 13.7525504, lng: 120.8981384},
    {title:'Dumaguete', lat: 9.1270303, lng: 123.3364775, infoContent: '<a href="http://blog.macrooceans.com/?p=42" target="_blank">Blog Post</a>'},
    {title:'Malapascua', lat: 11.3370524, lng: 124.0966194, infoContent: '<a href=" http://blog.macrooceans.com/?p=56" target="_blank">Blog Post</a>'},
    {title:'Sogod Bay', lat: 10.0553627, lng: 125.0355207, infoContent: '<a href=" http://blog.macrooceans.com/?p=209" target="_blank">Blog Post</a>'},
    {title:'Ticao Island', lat: 12.6035129, lng: 123.7040309, infoContent: '<a href=" http://blog.macrooceans.com/?p=661" target="_blank">Blog Post</a>'},
    {title:'Taklong Island', lat: 10.4103797, lng: 122.5008991, infoContent: '<a href=" http://blog.macrooceans.com/?p=321" target="_blank">Blog Post</a>'},
    {title:'Coron', lat: 12.2348721, lng: 120.0837924, infoContent: '<a href=" http://blog.macrooceans.com/?p=71" target="_blank">Blog Post</a>'},
    {title:'Apo Reef', lat: 12.717641, lng: 120.3776537, infoContent: '<a href=" http://blog.macrooceans.com/?p=58" target="_blank">Blog Post</a>'},
    {title:'Raja Ampat', lat: -0.5551063, lng: 130.6659531, infoContent: '<a href=" http://blog.macrooceans.com/?p=64" target="_blank">Blog Post</a>'},
    {title:'Takeno', lat: 35.6637181, lng: 134.7638374, infoContent: '<a href=" http://blog.macrooceans.com/?p=704" target="_blank">Blog Post</a>'},
  ];
</script>
